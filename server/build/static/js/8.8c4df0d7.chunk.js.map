{"version":3,"sources":["pages/HomePage/HomePage.jsx"],"names":["HomePage","totalDomains","domains","fetchDomains","ui","user","absoluteCount","isTech","isUpdateContact","setSortByRoles","lang","moment","locale","useState","isLoading","setIsLoading","formatMessage","useIntl","dispatch","useDispatch","techParams","setTechParams","previousTechParams","useEffect","length","heroKey","htmlTitleKey","titleKey","titleValues","name","first_name","last_name","ident","span","text","className","textAlign","Row","Column","computer","mobile","tablet","widescreen","to","size","id","tagName","values","a","linkText","href","rel","target","domainCount","domainTotal","onSelectTech","value","connect","filters","data","total","Object","count","bindActionCreators","fetchDomainsAction","setSortByRolesAction","defaultProps"],"mappings":"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","file":"static/js/8.8c4df0d7.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { Grid, Icon } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect, useDispatch } from 'react-redux';\nimport moment from 'moment';\nimport { bindActionCreators } from 'redux';\nimport { DomainList, UserData, MainLayout, Loading } from '../../components';\nimport { fetchDomains as fetchDomainsAction } from '../../redux/reducers/domains';\nimport { setSortByRoles as setSortByRolesAction } from '../../redux/reducers/filters';\n\nconst HomePage = ({\n    totalDomains,\n    domains,\n    fetchDomains,\n    ui,\n    user,\n    absoluteCount,\n    isTech,\n    isUpdateContact,\n    setSortByRoles,\n}) => {\n    const { lang } = ui;\n    moment.locale(lang);\n    const [isLoading, setIsLoading] = useState(true);\n    const { formatMessage } = useIntl();\n    const dispatch = useDispatch();\n\n    const [techParams, setTechParams] = useState(isTech);\n    const [previousTechParams, setPreviousTechParams] = useState(isTech);\n\n    const onSelectTech = (value) => {\n        setIsLoading(true);\n        setTechParams(value);\n        dispatch(setSortByRoles(value));\n    };\n\n    useEffect(() => {\n        if (domains.length === 0) {\n            (async () => {\n                await fetchDomains(0, false, isTech);\n                setIsLoading(false);\n            })();\n        } else if (previousTechParams !== isTech) {\n            (async () => {\n                await fetchDomains(0, false, isTech);\n                setIsLoading(false);\n            })();\n        } else {\n            setIsLoading(false);\n        }\n    }, [fetchDomains, isTech]);\n\n    if (isLoading) return <Loading />;\n\n    return (\n        <MainLayout\n            heroKey=\"dashboard.hero.text\"\n            htmlTitleKey=\"dashboard.htmlTitle\"\n            titleKey=\"dashboard.title\"\n            titleValues={{\n                name: `${user.first_name} ${user.last_name} (${user.ident})`,\n                span: (text) => <span>{text}</span>,\n            }}\n            ui={ui}\n            user={user}\n        >\n            <div className=\"page page--dashboard\">\n                <div className=\"quicklinks\">\n                    <Grid textAlign=\"center\">\n                        <Grid.Row>\n                            <Grid.Column computer={4} mobile={8} tablet={8} widescreen={3}>\n                                <Link className=\"quicklinks--link\" to=\"/companies\">\n                                    <Icon name=\"building\" size=\"large\" />\n                                    <FormattedMessage id=\"quicklinks.companies.title\" />\n                                </Link>\n                                <FormattedMessage id=\"quicklinks.companies.text\" tagName=\"p\" />\n                            </Grid.Column>\n                            <Grid.Column computer={4} mobile={8} tablet={8} widescreen={3}>\n                                <Link className=\"quicklinks--link\" to=\"/whois\">\n                                    <Icon name=\"user secret\" size=\"large\" />\n                                    <FormattedMessage id=\"quicklinks.whois.title\" />\n                                </Link>\n                                <FormattedMessage\n                                    id=\"quicklinks.whois.content\"\n                                    tagName=\"p\"\n                                    values={{\n                                        a: (linkText) => (\n                                            <a\n                                                href={formatMessage({\n                                                    id: 'quicklinks.whois.content.link',\n                                                })}\n                                                rel=\"noopener noreferrer\"\n                                                target=\"_blank\"\n                                            >\n                                                {linkText}\n                                            </a>\n                                        ),\n                                    }}\n                                />\n                            </Grid.Column>\n                        </Grid.Row>\n                    </Grid>\n                </div>\n                <DomainList\n                    domainCount={totalDomains}\n                    domains={domains}\n                    domainTotal={absoluteCount}\n                    isTech={isTech}\n                    isUpdateContact={isUpdateContact}\n                    lang={lang}\n                    onSelectTech={onSelectTech}\n                />\n                <UserData isTech={techParams} lang={lang} />\n            </div>\n        </MainLayout>\n    );\n};\n\nconst mapStateToProps = ({ domains, ui, user, filters }) => {\n    return {\n        absoluteCount: domains.data.total,\n        domains: Object.values(domains.data.domains),\n        isTech: filters.isTech,\n        totalDomains: domains.data.count,\n        ui,\n        user: user.data,\n        isUpdateContact: false,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators(\n        {\n            fetchDomains: fetchDomainsAction,\n            setSortByRoles: setSortByRolesAction,\n        },\n        dispatch\n    );\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomePage);\n\nHomePage.propTypes = {\n    absoluteCount: PropTypes.number,\n    domains: PropTypes.array,\n    totalDomains: PropTypes.number.isRequired,\n    fetchDomains: PropTypes.func.isRequired,\n    ui: PropTypes.object.isRequired,\n    user: PropTypes.object.isRequired,\n    isTech: PropTypes.any.isRequired,\n    setSortByRoles: PropTypes.func.isRequired,\n};\n\nHomePage.defaultProps = {\n    absoluteCount: 0,\n    domains: [],\n};\n"],"sourceRoot":""}