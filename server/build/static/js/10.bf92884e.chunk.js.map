{"version":3,"sources":["pages/WhoIsPage/Domain/index.js","pages/WhoIsPage/WhoIsPage.jsx"],"names":["Domain","id","name","contacts","onChange","domains","useState","isOpen","setIsOpen","index","find","o","i","Table","Row","verticalAlign","Cell","width","to","className","checkAll","domain","singleLine","textAlign","onClick","type","Icon","classNames","perPageOptions","key","text","value","WhoIsPage","companies","fetchCompanies","fetchContacts","fetchDomains","setSortByRoles","message","ui","updateContact","user","isTech","formatMessage","useIntl","useCookies","cookies","setCookies","whoIsPerPage","isDirty","setIsDirty","isLoading","setIsLoading","isSubmitConfirmModalOpen","setIsSubmitConfirmModalOpen","Number","perPage","setPerPage","activePage","setActivePage","queryKeys","setQueryKeys","whoIsData","setWhoIsData","results","setResults","uiElemSize","paginatedDomains","copied","numOfChild","Math","ceil","length","dispatch","useDispatch","push","splice","onSelectTech","React","useCallback","useEffect","handleWhoIsChange","data","prevState","Object","entries","reduce","acc","contact","changed","disclosed_attributes","registrant_publishable","toggleSubmitConfirmModal","handleWhoIsSubmit","Promise","all","values","filter","map","form","tech_contacts","roleOptions","hasBackButton","titleKey","Container","tagName","Form","onSubmit","query","toString","toLowerCase","queryResults","includes","some","item","admin_contacts","nameservers","hostname","ipv4","ipv6","Input","defaultValue","disabled","event","placeholder","size","Button","color","icon","primary","loading","Dropdown","fluid","options","selection","headerContent","Header","HeaderCell","Footer","colSpan","Body","Helpers","parseDomainContacts","Pagination","firstItem","lastItem","nextItem","content","onPageChange","e","page","prevItem","totalPages","Field","inline","path","onCancel","onConfirm","open","connect","state","ids","filters","contactsActions","fetchCompaniesAction","fetchDomainsAction","setSortByRolesAction","defaultProps"],"mappings":"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","file":"static/js/10.bf92884e.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { Icon, Table } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport { WhoIsEdit } from '../../../components';\n\nexport default function Domain({ id, name, contacts, onChange, domains }) {\n    const [isOpen, setIsOpen] = useState(false);\n\n    let index = 0;\n    // eslint-disable-next-line array-callback-return\n    domains.find((o, i) => {\n        if (o.id === id) index = i;\n    });\n\n    return (\n        <Table.Row verticalAlign=\"top\">\n            <Table.Cell width={6}>\n                <Link to={`/domain/${id}`}>{name}</Link>\n            </Table.Cell>\n            <Table.Cell width={8}>\n                <div className=\"ui form\">\n                    <WhoIsEdit\n                        checkAll\n                        contacts={contacts}\n                        domain={domains[index]}\n                        isOpen={isOpen}\n                        onChange={onChange}\n                    />\n                </div>\n            </Table.Cell>\n            <Table.Cell singleLine textAlign=\"right\" width={2}>\n                <button onClick={() => setIsOpen(!isOpen)} type=\"button\">\n                    <FormattedMessage id=\"whois.domain.detailInfo\" />\n                    <Icon\n                        className={classNames({ 'vertically flipped': isOpen })}\n                        name=\"angle down\"\n                    />\n                </button>\n            </Table.Cell>\n        </Table.Row>\n    );\n}\n","/* eslint-disable camelcase */\nimport React, { useEffect, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport PropTypes from 'prop-types';\nimport {\n    Button,\n    Form,\n    Icon,\n    Container,\n    Table,\n    Input,\n    Pagination,\n    Dropdown,\n} from 'semantic-ui-react';\nimport { connect, useDispatch } from 'react-redux';\nimport { useCookies } from 'react-cookie';\nimport MediaQuery from 'react-responsive';\nimport {\n    Loading,\n    MainLayout,\n    MessageModule,\n    PageMessage,\n    WhoIsConfirmDialog,\n} from '../../components';\nimport Domain from './Domain';\nimport * as contactsActions from '../../redux/reducers/contacts';\nimport { fetchDomains as fetchDomainsAction } from '../../redux/reducers/domains';\nimport { fetchCompanies as fetchCompaniesAction } from '../../redux/reducers/companies';\nimport { setSortByRoles as setSortByRolesAction } from '../../redux/reducers/filters';\nimport Helpers from '../../utils/helpers';\n\nconst perPageOptions = [\n    { key: 6, text: '6', value: 6 },\n    { key: 12, text: '12', value: 12 },\n    { key: 24, text: '24', value: 24 },\n];\n\nconst WhoIsPage = ({\n    companies,\n    contacts,\n    domains,\n    fetchCompanies,\n    fetchContacts,\n    fetchDomains,\n    setSortByRoles,\n    message,\n    ui,\n    updateContact,\n    user,\n    isTech,\n}) => {\n    const { formatMessage } = useIntl();\n    const [cookies, setCookies] = useCookies(['whoIsPerPage']);\n    const { whoIsPerPage } = cookies;\n    const [isDirty, setIsDirty] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isSubmitConfirmModalOpen, setIsSubmitConfirmModalOpen] = useState(false);\n    const [perPage, setPerPage] = useState(whoIsPerPage ? Number(whoIsPerPage) : 12);\n    const [activePage, setActivePage] = useState(1);\n    const [queryKeys, setQueryKeys] = useState('');\n    const [whoIsData, setWhoIsData] = useState({});\n    const [results, setResults] = useState(domains);\n    const { uiElemSize } = ui;\n    const paginatedDomains = [];\n    const copied = [...results];\n    const numOfChild = Math.ceil(copied.length / perPage);\n    const dispatch = useDispatch();\n    for (let i = 0; i < numOfChild; i += 1) {\n        paginatedDomains.push(copied.splice(0, perPage));\n    }\n\n    const onSelectTech = React.useCallback((value) => {\n        dispatch(setSortByRoles(value));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (domains.length === 0) {\n            if (isTech) {\n                (async () => {\n                    await fetchDomains(0, false, true);\n                    await fetchContacts();\n                    await fetchCompanies();\n                    setIsLoading(false);\n                })();\n            } else {\n                (async () => {\n                    await fetchDomains(0, false, false);\n                    await fetchContacts();\n                    await fetchCompanies();\n                    setIsLoading(false);\n                })();\n            }\n        } else {\n            setIsLoading(false);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [fetchDomains, fetchContacts, fetchCompanies, isTech]);\n\n    useEffect(() => {\n        setWhoIsData(contacts);\n    }, [contacts]);\n\n    useEffect(() => {\n        setResults(domains);\n    }, [domains]);\n\n    const handleItemsPerPage = (event, { value }) => {\n        setCookies('whoIsPerPage', value, { path: '/whois' });\n        setActivePage(1);\n        setPerPage(value);\n    };\n\n    const handleSearchChange = (event, { value }) => {\n        setQueryKeys(value);\n        setResults(value ? results : domains);\n    };\n\n    const handleSearchReset = () => {\n        setQueryKeys('');\n        setActivePage(1);\n        setWhoIsData(contacts);\n        setResults(domains);\n    };\n\n    const handleSearch = () => {\n        if (queryKeys.length > 0) {\n            const query = queryKeys.toString().toLowerCase();\n            const queryResults = domains.filter((domain) => {\n                return (\n                    domain.name.toLowerCase().includes(query) ||\n                    domain.tech_contacts.some((item) => item.name.toLowerCase().includes(query)) ||\n                    domain.admin_contacts.some((item) => item.name.toLowerCase().includes(query)) ||\n                    domain.nameservers.some(\n                        (item) =>\n                            item.hostname.toLowerCase().includes(query) ||\n                            item.ipv4.toString().toLowerCase().includes(query) ||\n                            item.ipv6.toString().toLowerCase().includes(query)\n                    )\n                );\n            });\n            setResults(queryResults.length ? queryResults : []);\n        } else if (queryKeys.length === 0) {\n            setResults(domains);\n        }\n        setActivePage(1);\n    };\n\n    const handleWhoIsChange = (data) => {\n        setWhoIsData((prevState) =>\n            Object.entries(prevState).reduce((acc, [id, contact]) => {\n                if (data[id]) {\n                    return {\n                        ...acc,\n                        [id]: {\n                            ...contact,\n                            changed: true,\n                            disclosed_attributes: data[id].disclosed_attributes,\n                            registrant_publishable: data[id].registrant_publishable,\n                        },\n                    };\n                }\n                return {\n                    ...acc,\n                    [id]: contact,\n                };\n            }, {})\n        );\n        setIsDirty(true);\n    };\n\n    const toggleSubmitConfirmModal = () => {\n        setIsSubmitConfirmModalOpen(!isSubmitConfirmModalOpen);\n    };\n\n    const handleWhoIsSubmit = async () => {\n        setIsLoading(true);\n        setIsSubmitConfirmModalOpen(false);\n        await Promise.all(\n            Object.values(whoIsData)\n                .filter(({ changed }) => changed)\n                .map((contact) => {\n                    const form = {\n                        disclosed_attributes: [...contact.disclosed_attributes],\n                        registrant_publishable: contact.registrant_publishable,\n                    };\n                    return updateContact(contact.id, form);\n                })\n        );\n        setIsDirty(false);\n        setIsLoading(false);\n    };\n\n    if ((!domains?.length || domains[0]?.tech_contacts?.length) && isLoading) {\n        return <Loading />;\n    }\n\n    const handleRole = (event, { name, value }) => {\n        if (value === 'domains.roles.regAndAdmRoles' && isTech) {\n            onSelectTech(false);\n        }\n        if (value === 'domains.roles.allRoles' && !isTech) {\n            onSelectTech(true);\n        }\n    };\n\n    const roleOptions = [\n        {\n            id: 'domains.roles.regAndAdmRoles',\n            key: 'domains.roles.regAndAdmRoles',\n            text: formatMessage({ id: 'domains.roles.regAndAdmRoles' }),\n            value: 'domains.roles.regAndAdmRoles',\n        },\n        {\n            id: 'domains.roles.allRoles',\n            key: 'domains.roles.allRoles',\n            text: formatMessage({ id: 'domains.roles.allRoles' }),\n            value: 'domains.roles.allRoles',\n        },\n    ];\n\n    return (\n        <MainLayout hasBackButton titleKey=\"whois.title\">\n            {!isLoading && message && <MessageModule message={message} />}\n            <div className=\"page page--whois\">\n                {domains?.length ? (\n                    <>\n                        <div className=\"page--header\">\n                            <Container>\n                                <div className=\"page--header--text\">\n                                    <FormattedMessage id=\"whois.content.title\" tagName=\"h2\" />\n                                    <FormattedMessage id=\"whois.content.text\" tagName=\"p\" />\n                                </div>\n                                <Form className=\"form-filter\" onSubmit={handleSearch}>\n                                    <div className=\"form-filter--search\">\n                                        <div className=\"form-filter--actions\" />\n                                        <div className=\"search-field\">\n                                            <Input\n                                                className=\"icon\"\n                                                defaultValue={queryKeys}\n                                                disabled={isLoading}\n                                                name=\"queryKeys\"\n                                                onChange={handleSearchChange}\n                                                placeholder={formatMessage({\n                                                    id: 'whois.searchForADomain',\n                                                })}\n                                                size=\"massive\"\n                                                type=\"text\"\n                                            />\n                                            <Button\n                                                color=\"orange\"\n                                                icon=\"sync\"\n                                                onClick={handleSearchReset}\n                                                type=\"reset\"\n                                            />\n                                            <Button icon=\"arrow right\" primary type=\"submit\" />\n                                        </div>\n                                        <div className=\"form-filter--actions\">\n                                            <MediaQuery\n                                                query=\"(min-width: 768px)\"\n                                                values={{ width: 1224 }}\n                                            >\n                                                <Button\n                                                    disabled={isLoading || !isDirty}\n                                                    form=\"whois-page-form\"\n                                                    loading={isLoading}\n                                                    primary\n                                                    size={uiElemSize}\n                                                    type=\"submit\"\n                                                >\n                                                    <FormattedMessage id=\"actions.save\" />\n                                                </Button>\n                                            </MediaQuery>\n                                        </div>\n                                    </div>\n                                    <div>\n                                        <FormattedMessage\n                                            id=\"domains.form.selectRole\"\n                                            tagName=\"label\"\n                                        />\n                                        <Dropdown\n                                            defaultValue={\n                                                isTech ? roleOptions[1].value : roleOptions[0].value\n                                            }\n                                            fluid\n                                            name=\"queryRole\"\n                                            onChange={handleRole}\n                                            options={roleOptions}\n                                            selection\n                                        />\n                                    </div>\n                                </Form>\n                            </Container>\n                        </div>\n                        {isLoading || !results.length ? (\n                            <>\n                                {isLoading && <Loading />}\n                                {!isLoading && !results.length && (\n                                    <PageMessage\n                                        headerContent={\n                                            <FormattedMessage\n                                                id=\"whois.search.message.title\"\n                                                tagName=\"span\"\n                                            />\n                                        }\n                                    />\n                                )}\n                            </>\n                        ) : (\n                            <div className=\"page--content\">\n                                <Container>\n                                    <Form id=\"whois-page-form\" onSubmit={toggleSubmitConfirmModal}>\n                                        <Table verticalAlign=\"top\">\n                                            <Table.Header>\n                                                <MediaQuery\n                                                    query=\"(min-width: 768px)\"\n                                                    values={{ width: 1224 }}\n                                                >\n                                                    <Table.Row>\n                                                        <Table.HeaderCell>\n                                                            <FormattedMessage id=\"whois.domain\" />\n                                                        </Table.HeaderCell>\n                                                        <Table.HeaderCell>\n                                                            <FormattedMessage id=\"whois.publicInfo\" />\n                                                        </Table.HeaderCell>\n                                                        <Table.HeaderCell />\n                                                    </Table.Row>\n                                                </MediaQuery>\n                                                <MediaQuery\n                                                    query=\"(max-width: 767px)\"\n                                                    values={{ width: 1224 }}\n                                                >\n                                                    <Table.Row>\n                                                        <Table.HeaderCell>\n                                                            <Button\n                                                                disabled={isLoading || !isDirty}\n                                                                form=\"whois-page-form\"\n                                                                loading={isLoading}\n                                                                primary\n                                                                size={uiElemSize}\n                                                                type=\"submit\"\n                                                            >\n                                                                <FormattedMessage id=\"actions.save\" />\n                                                            </Button>\n                                                        </Table.HeaderCell>\n                                                    </Table.Row>\n                                                </MediaQuery>\n                                            </Table.Header>\n                                            <Table.Footer>\n                                                <Table.Row>\n                                                    <Table.Cell colSpan={3} textAlign=\"right\">\n                                                        <Button\n                                                            disabled={isLoading || !isDirty}\n                                                            form=\"whois-page-form\"\n                                                            loading={isLoading}\n                                                            primary\n                                                            size={uiElemSize}\n                                                            type=\"submit\"\n                                                        >\n                                                            <FormattedMessage id=\"actions.save\" />\n                                                        </Button>\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                            </Table.Footer>\n                                            <Table.Body>\n                                                {paginatedDomains[activePage - 1].map((domain) => (\n                                                    <Domain\n                                                        key={domain.id}\n                                                        contacts={Helpers.parseDomainContacts(\n                                                            user,\n                                                            domain,\n                                                            whoIsData,\n                                                            companies\n                                                        )}\n                                                        domains={domains}\n                                                        id={domain.id}\n                                                        name={domain.name}\n                                                        onChange={handleWhoIsChange}\n                                                    />\n                                                ))}\n                                            </Table.Body>\n                                        </Table>\n                                    </Form>\n                                </Container>\n                                <div className=\"paginator\">\n                                    <Container>\n                                        <Pagination\n                                            activePage={activePage}\n                                            firstItem={null}\n                                            lastItem={null}\n                                            nextItem={{\n                                                content: (\n                                                    <>\n                                                        <FormattedMessage id=\"pagination.next\" />\n                                                        <Icon name=\"arrow right\" />\n                                                    </>\n                                                ),\n                                                disabled: activePage === paginatedDomains.length,\n                                                icon: true,\n                                            }}\n                                            onPageChange={(e, { activePage: page }) =>\n                                                setActivePage(page)\n                                            }\n                                            prevItem={{\n                                                content: (\n                                                    <>\n                                                        <Icon name=\"arrow left\" />\n                                                        <FormattedMessage id=\"pagination.previous\" />\n                                                    </>\n                                                ),\n                                                disabled: activePage === 1,\n                                                icon: true,\n                                            }}\n                                            totalPages={paginatedDomains.length}\n                                        />\n                                        <Form>\n                                            <Form.Field inline>\n                                                <FormattedMessage\n                                                    id=\"pagination.perPage\"\n                                                    tagName=\"label\"\n                                                />\n                                                <Dropdown\n                                                    onChange={handleItemsPerPage}\n                                                    options={perPageOptions}\n                                                    selection\n                                                    value={perPage}\n                                                />\n                                            </Form.Field>\n                                        </Form>\n                                    </Container>\n                                </div>\n                            </div>\n                        )}\n                        <WhoIsConfirmDialog\n                            contacts={whoIsData}\n                            onCancel={toggleSubmitConfirmModal}\n                            onConfirm={handleWhoIsSubmit}\n                            open={isSubmitConfirmModalOpen}\n                        />\n                    </>\n                ) : (\n                    <PageMessage\n                        headerContent={<FormattedMessage id=\"whois.none.message.title\" />}\n                        icon=\"frown outline\"\n                    />\n                )}\n            </div>\n        </MainLayout>\n    );\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        companies: state.companies.data,\n        contacts: state.contacts.data,\n        domains: state.domains.ids.map((id) => state.domains.data.domains[id]),\n        isTech: state.filters.isTech,\n        ui: state.ui,\n        user: state.user.data,\n    };\n};\n\nexport default connect(mapStateToProps, {\n    ...contactsActions,\n    fetchCompanies: fetchCompaniesAction,\n    fetchDomains: fetchDomainsAction,\n    setSortByRoles: setSortByRolesAction,\n})(WhoIsPage);\n\nWhoIsPage.propTypes = {\n    companies: PropTypes.object,\n    contacts: PropTypes.object,\n    domains: PropTypes.array,\n    message: PropTypes.bool,\n    setSortByRoles: PropTypes.func.isRequired,\n    fetchCompanies: PropTypes.func.isRequired,\n    fetchContacts: PropTypes.func.isRequired,\n    fetchDomains: PropTypes.func.isRequired,\n    ui: PropTypes.object.isRequired,\n    updateContact: PropTypes.func.isRequired,\n    user: PropTypes.object.isRequired,\n    isTech: PropTypes.string.isRequired,\n};\n\nWhoIsPage.defaultProps = {\n    companies: [],\n    contacts: [],\n    domains: {},\n    message: false,\n};\n"],"sourceRoot":""}