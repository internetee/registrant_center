(this["webpackJsonpeis-registrant"]=this["webpackJsonpeis-registrant"]||[]).push([[10],{1046:function(e,t,a){"use strict";a.r(t);var s=a(23),n=a(5),c=a(54),i=a(83),r=a(38),o=a(29),l=a(0),j=a.n(l),d=a(505),b=a(1018),u=a(1019),h=a(1025),O=a(1023),m=a(345),x=a(1028),f=a(1027),g=a(1030),p=a(110),v=a(58),w=a(167),C=a(146),y=a.n(C),N=a(99),R=a(81),S=a(6),k=a.n(S),A=a(1);function P(e){var t=e.id,a=e.name,s=e.contacts,n=e.onChange,c=e.domains,i=Object(l.useState)(!1),r=Object(o.a)(i,2),j=r[0],d=r[1],u=0;return c.find((function(e,a){e.id===t&&(u=a)})),Object(A.jsxs)(f.a.Row,{verticalAlign:"top",children:[Object(A.jsx)(f.a.Cell,{width:6,children:Object(A.jsx)(R.b,{to:"/domain/".concat(t),children:a})}),Object(A.jsx)(f.a.Cell,{width:8,children:Object(A.jsx)("div",{className:"ui form",children:Object(A.jsx)(N.l,{checkAll:!0,contacts:s,domain:c[u],isOpen:j,onChange:n})})}),Object(A.jsx)(f.a.Cell,{singleLine:!0,textAlign:"right",width:2,children:Object(A.jsxs)("button",{onClick:function(){return d(!j)},type:"button",children:[Object(A.jsx)(b.a,{id:"whois.domain.detailInfo"}),Object(A.jsx)(p.a,{className:k()({"vertically flipped":j}),name:"angle down"})]})})]})}var _=a(107),I=a(346),L=a(347),F=a(350),q=a(348),z=[{key:6,text:"6",value:6},{key:12,text:"12",value:12},{key:24,text:"24",value:24}],B=function(e){for(var t,a,C=e.companies,R=e.contacts,S=e.domains,k=e.fetchCompanies,_=e.fetchContacts,I=e.fetchDomains,L=e.setSortByRoles,F=e.message,B=e.ui,H=e.updateContact,D=e.user,E=e.isTech,T=Object(d.a)().formatMessage,J=Object(w.b)(["whoIsPerPage"]),K=Object(o.a)(J,2),M=K[0],V=K[1],G=M.whoIsPerPage,Q=Object(l.useState)(!1),U=Object(o.a)(Q,2),W=U[0],X=U[1],Y=Object(l.useState)(!0),Z=Object(o.a)(Y,2),$=Z[0],ee=Z[1],te=Object(l.useState)(!1),ae=Object(o.a)(te,2),se=ae[0],ne=ae[1],ce=Object(l.useState)(G?Number(G):12),ie=Object(o.a)(ce,2),re=ie[0],oe=ie[1],le=Object(l.useState)(1),je=Object(o.a)(le,2),de=je[0],be=je[1],ue=Object(l.useState)(""),he=Object(o.a)(ue,2),Oe=he[0],me=he[1],xe=Object(l.useState)({}),fe=Object(o.a)(xe,2),ge=fe[0],pe=fe[1],ve=Object(l.useState)(S),we=Object(o.a)(ve,2),Ce=we[0],ye=we[1],Ne=B.uiElemSize,Re=[],Se=Object(r.a)(Ce),ke=Math.ceil(Se.length/re),Ae=Object(v.c)(),Pe=0;Pe<ke;Pe+=1)Re.push(Se.splice(0,re));var _e=j.a.useCallback((function(e){Ae(L(e))}),[]);Object(l.useEffect)((function(){0===S.length?E?Object(i.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(0,!1,!0);case 2:return e.next=4,_();case 4:return e.next=6,k();case 6:ee(!1);case 7:case"end":return e.stop()}}),e)})))():Object(i.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(0,!1,!1);case 2:return e.next=4,_();case 4:return e.next=6,k();case 6:ee(!1);case 7:case"end":return e.stop()}}),e)})))():ee(!1)}),[I,_,k,E]),Object(l.useEffect)((function(){pe(R)}),[R]),Object(l.useEffect)((function(){ye(S)}),[S]);var Ie=function(e){pe((function(t){return Object.entries(t).reduce((function(t,a){var c=Object(o.a)(a,2),i=c[0],r=c[1];return e[i]?Object(n.a)(Object(n.a)({},t),{},Object(s.a)({},i,Object(n.a)(Object(n.a)({},r),{},{changed:!0,disclosed_attributes:e[i].disclosed_attributes,registrant_publishable:e[i].registrant_publishable}))):Object(n.a)(Object(n.a)({},t),{},Object(s.a)({},i,r))}),{})})),X(!0)},Le=function(){ne(!se)},Fe=function(){var e=Object(i.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ee(!0),ne(!1),e.next=4,Promise.all(Object.values(ge).filter((function(e){return e.changed})).map((function(e){var t={disclosed_attributes:Object(r.a)(e.disclosed_attributes),registrant_publishable:e.registrant_publishable};return H(e.id,t)})));case 4:X(!1),ee(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if((null===S||void 0===S||!S.length||null!==(t=S[0])&&void 0!==t&&null!==(a=t.tech_contacts)&&void 0!==a&&a.length)&&$)return Object(A.jsx)(N.c,{});var qe=[{id:"domains.roles.regAndAdmRoles",key:"domains.roles.regAndAdmRoles",text:T({id:"domains.roles.regAndAdmRoles"}),value:"domains.roles.regAndAdmRoles"},{id:"domains.roles.allRoles",key:"domains.roles.allRoles",text:T({id:"domains.roles.allRoles"}),value:"domains.roles.allRoles"}];return Object(A.jsxs)(N.d,{hasBackButton:!0,titleKey:"whois.title",children:[!$&&F&&Object(A.jsx)(N.e,{message:F}),Object(A.jsx)("div",{className:"page page--whois",children:null!==S&&void 0!==S&&S.length?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"page--header",children:Object(A.jsxs)(u.a,{children:[Object(A.jsxs)("div",{className:"page--header--text",children:[Object(A.jsx)(b.a,{id:"whois.content.title",tagName:"h2"}),Object(A.jsx)(b.a,{id:"whois.content.text",tagName:"p"})]}),Object(A.jsxs)(h.a,{className:"form-filter",onSubmit:function(){if(Oe.length>0){var e=Oe.toString().toLowerCase(),t=S.filter((function(t){return t.name.toLowerCase().includes(e)||t.tech_contacts.some((function(t){return t.name.toLowerCase().includes(e)}))||t.admin_contacts.some((function(t){return t.name.toLowerCase().includes(e)}))||t.nameservers.some((function(t){return t.hostname.toLowerCase().includes(e)||t.ipv4.toString().toLowerCase().includes(e)||t.ipv6.toString().toLowerCase().includes(e)}))}));ye(t.length?t:[])}else 0===Oe.length&&ye(S);be(1)},children:[Object(A.jsxs)("div",{className:"form-filter--search",children:[Object(A.jsx)("div",{className:"form-filter--actions"}),Object(A.jsxs)("div",{className:"search-field",children:[Object(A.jsx)(O.a,{className:"icon",defaultValue:Oe,disabled:$,name:"queryKeys",onChange:function(e,t){var a=t.value;me(a),ye(a?Ce:S)},placeholder:T({id:"whois.searchForADomain"}),size:"massive",type:"text"}),Object(A.jsx)(m.a,{color:"orange",icon:"sync",onClick:function(){me(""),be(1),pe(R),ye(S)},type:"reset"}),Object(A.jsx)(m.a,{icon:"arrow right",primary:!0,type:"submit"})]}),Object(A.jsx)("div",{className:"form-filter--actions",children:Object(A.jsx)(y.a,{query:"(min-width: 768px)",values:{width:1224},children:Object(A.jsx)(m.a,{disabled:$||!W,form:"whois-page-form",loading:$,primary:!0,size:Ne,type:"submit",children:Object(A.jsx)(b.a,{id:"actions.save"})})})})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)(b.a,{id:"domains.form.selectRole",tagName:"label"}),Object(A.jsx)(x.a,{defaultValue:E?qe[1].value:qe[0].value,fluid:!0,name:"queryRole",onChange:function(e,t){t.name;var a=t.value;"domains.roles.regAndAdmRoles"===a&&E&&_e(!1),"domains.roles.allRoles"!==a||E||_e(!0)},options:qe,selection:!0})]})]})]})}),$||!Ce.length?Object(A.jsxs)(A.Fragment,{children:[$&&Object(A.jsx)(N.c,{}),!$&&!Ce.length&&Object(A.jsx)(N.f,{headerContent:Object(A.jsx)(b.a,{id:"whois.search.message.title",tagName:"span"})})]}):Object(A.jsxs)("div",{className:"page--content",children:[Object(A.jsx)(u.a,{children:Object(A.jsx)(h.a,{id:"whois-page-form",onSubmit:Le,children:Object(A.jsxs)(f.a,{verticalAlign:"top",children:[Object(A.jsxs)(f.a.Header,{children:[Object(A.jsx)(y.a,{query:"(min-width: 768px)",values:{width:1224},children:Object(A.jsxs)(f.a.Row,{children:[Object(A.jsx)(f.a.HeaderCell,{children:Object(A.jsx)(b.a,{id:"whois.domain"})}),Object(A.jsx)(f.a.HeaderCell,{children:Object(A.jsx)(b.a,{id:"whois.publicInfo"})}),Object(A.jsx)(f.a.HeaderCell,{})]})}),Object(A.jsx)(y.a,{query:"(max-width: 767px)",values:{width:1224},children:Object(A.jsx)(f.a.Row,{children:Object(A.jsx)(f.a.HeaderCell,{children:Object(A.jsx)(m.a,{disabled:$||!W,form:"whois-page-form",loading:$,primary:!0,size:Ne,type:"submit",children:Object(A.jsx)(b.a,{id:"actions.save"})})})})})]}),Object(A.jsx)(f.a.Footer,{children:Object(A.jsx)(f.a.Row,{children:Object(A.jsx)(f.a.Cell,{colSpan:3,textAlign:"right",children:Object(A.jsx)(m.a,{disabled:$||!W,form:"whois-page-form",loading:$,primary:!0,size:Ne,type:"submit",children:Object(A.jsx)(b.a,{id:"actions.save"})})})})}),Object(A.jsx)(f.a.Body,{children:Re[de-1].map((function(e){return Object(A.jsx)(P,{contacts:q.a.parseDomainContacts(D,e,ge,C),domains:S,id:e.id,name:e.name,onChange:Ie},e.id)}))})]})})}),Object(A.jsx)("div",{className:"paginator",children:Object(A.jsxs)(u.a,{children:[Object(A.jsx)(g.a,{activePage:de,firstItem:null,lastItem:null,nextItem:{content:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(b.a,{id:"pagination.next"}),Object(A.jsx)(p.a,{name:"arrow right"})]}),disabled:de===Re.length,icon:!0},onPageChange:function(e,t){var a=t.activePage;return be(a)},prevItem:{content:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(p.a,{name:"arrow left"}),Object(A.jsx)(b.a,{id:"pagination.previous"})]}),disabled:1===de,icon:!0},totalPages:Re.length}),Object(A.jsx)(h.a,{children:Object(A.jsxs)(h.a.Field,{inline:!0,children:[Object(A.jsx)(b.a,{id:"pagination.perPage",tagName:"label"}),Object(A.jsx)(x.a,{onChange:function(e,t){var a=t.value;V("whoIsPerPage",a,{path:"/whois"}),be(1),oe(a)},options:z,selection:!0,value:re})]})})]})})]}),Object(A.jsx)(N.k,{contacts:ge,onCancel:Le,onConfirm:Fe,open:se})]}):Object(A.jsx)(N.f,{headerContent:Object(A.jsx)(b.a,{id:"whois.none.message.title"}),icon:"frown outline"})})]})};t.default=Object(v.b)((function(e){return{companies:e.companies.data,contacts:e.contacts.data,domains:e.domains.ids.map((function(t){return e.domains.data.domains[t]})),isTech:e.filters.isTech,ui:e.ui,user:e.user.data}}),Object(n.a)(Object(n.a)({},_),{},{fetchCompanies:L.b,fetchDomains:I.c,setSortByRoles:F.b}))(B);B.defaultProps={companies:[],contacts:[],domains:{},message:!1}}}]);
//# sourceMappingURL=10.bf92884e.chunk.js.map