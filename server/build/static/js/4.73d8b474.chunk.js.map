{"version":3,"sources":["pages/ConfirmationPage/ConfirmationPage.jsx"],"names":["connect","state","dispatch","bindActionCreators","fetchVerification","fetchVerificationAction","respondToVerification","respondToVerificationAction","match","ui","message","verification","useState","isLoading","setIsLoading","uiElemSize","handleVerification","shouldConfirm","params","name","token","type","useEffect","domain","hasBackButton","titleKey","className","domainName","status","textAlign","id","text","basic","Body","Row","Cell","width","tagName","newRegistrant","ident","country","currentRegistrant","disabled","loading","onClick","secondary","size","primary","str","headerAltText","headerContent","icon"],"mappings":"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","file":"static/js/4.73d8b474.chunk.js","sourcesContent":["/* eslint-disable camelcase */\nimport React, { useEffect, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button, Container, Table } from 'semantic-ui-react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { Loading, MainLayout, PageMessage, MessageModule } from '../../components';\nimport {\n    fetchVerification as fetchVerificationAction,\n    respondToVerification as respondToVerificationAction,\n} from '../../redux/reducers/verification';\n\nconst ConfirmationPage = ({\n    match,\n    ui,\n    message,\n    fetchVerification,\n    respondToVerification,\n    verification,\n}) => {\n    const [isLoading, setIsLoading] = useState(true);\n    const { uiElemSize } = ui;\n\n    const headerAltText = () => {\n        let str = '';\n        if (match.params.type === 'change') {\n            if (verification.status === 'confirmed') {\n                str = 'confirmation.change_confirmed_alt';\n            } else {\n                str = 'confirmation.change_rejected_alt';\n            }\n        } else if (match.params.type === 'delete') {\n            if (verification.status === 'confirmed') {\n                str = 'confirmation.delete_confirmed_alt';\n            } else {\n                str = 'confirmation.delete_confirmed_alt';\n            }\n        }\n\n        return str;\n    };\n\n    const handleVerification = async (shouldConfirm) => {\n        setIsLoading(true);\n        await respondToVerification(\n            match.params.name,\n            match.params.token,\n            shouldConfirm,\n            match.params.type\n        );\n        setIsLoading(false);\n    };\n\n    useEffect(() => {\n        (async () => {\n            setIsLoading(true);\n            await fetchVerification({\n                domain: match.params.name,\n                token: match.params.token,\n                type: match.params.type,\n            });\n            setIsLoading(false);\n        })();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [fetchVerification]);\n\n    if (isLoading) return <Loading />;\n\n    return (\n        <MainLayout\n            hasBackButton\n            titleKey={\n                match.params.type === 'change'\n                    ? 'confirmation.change_title'\n                    : 'confirmation.delete_title'\n            }\n        >\n            {!isLoading && message && <MessageModule message={message} />}\n            <div className=\"page page--whois\">\n                {verification.domainName != null ? (\n                    <>\n                        {verification.status == null ? (\n                            <div className=\"page--whosis\">\n                                <div className=\"page--header\">\n                                    <Container textAlign=\"center\">\n                                        <div>\n                                            <h2>{verification.domainName}</h2>\n                                            <p>\n                                                <FormattedMessage\n                                                    id={\n                                                        match.params.type === 'change'\n                                                            ? 'confirmation.change_default_alt'\n                                                            : 'confirmation.delete_default_alt'\n                                                    }\n                                                />\n                                            </p>\n                                        </div>\n                                    </Container>\n                                </div>\n                                {match.params.type === 'change' ? (\n                                    <div className=\"page--block\">\n                                        {' '}\n                                        <Container text>\n                                            <header className=\"page--block--header\">\n                                                <h2>\n                                                    <FormattedMessage id=\"confirmation.new_registrant\" />\n                                                </h2>\n                                            </header>\n                                            <Table basic=\"very\">\n                                                <Table.Body>\n                                                    <Table.Row>\n                                                        <Table.Cell width=\"4\">\n                                                            <FormattedMessage\n                                                                id=\"domain.registrar.name\"\n                                                                tagName=\"strong\"\n                                                            />\n                                                        </Table.Cell>\n                                                        <Table.Cell>\n                                                            {verification.newRegistrant.name}\n                                                        </Table.Cell>\n                                                    </Table.Row>\n                                                    <Table.Row>\n                                                        <Table.Cell width=\"4\">\n                                                            <FormattedMessage\n                                                                id=\"domain.registrant.ident\"\n                                                                tagName=\"strong\"\n                                                            />\n                                                        </Table.Cell>\n                                                        <Table.Cell>\n                                                            {verification.newRegistrant.ident}\n                                                        </Table.Cell>\n                                                    </Table.Row>\n                                                    <Table.Row>\n                                                        <Table.Cell width=\"4\">\n                                                            <FormattedMessage\n                                                                id=\"domain.contact.country\"\n                                                                tagName=\"strong\"\n                                                            />\n                                                        </Table.Cell>\n                                                        <Table.Cell>\n                                                            {verification.newRegistrant.country}\n                                                        </Table.Cell>\n                                                    </Table.Row>\n                                                </Table.Body>\n                                            </Table>\n                                        </Container>\n                                    </div>\n                                ) : null}\n                                <div className=\"page--block\">\n                                    <Container text>\n                                        <header className=\"page--block--header\">\n                                            <h2>\n                                                <FormattedMessage id=\"confirmation.current_registrant\" />\n                                            </h2>\n                                        </header>\n                                        <Table basic=\"very\">\n                                            <Table.Body>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.registrar.name\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.name}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.registrant.ident\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.ident}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.contact.country\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.country}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                            </Table.Body>\n                                        </Table>\n                                    </Container>\n                                </div>\n                                <div className=\"page--block\">\n                                    <Container textAlign=\"center\">\n                                        <div className=\"page--header--actions\">\n                                            <Button\n                                                data-test=\"link-domain-edit\"\n                                                disabled={isLoading}\n                                                loading={isLoading}\n                                                onClick={() => handleVerification('rejected')}\n                                                secondary\n                                                size={uiElemSize}\n                                            >\n                                                <FormattedMessage id=\"confirmation.reject\" />\n                                            </Button>\n                                            <Button\n                                                data-test=\"link-domain-edit\"\n                                                disabled={isLoading}\n                                                loading={isLoading}\n                                                onClick={() => handleVerification('confirmed')}\n                                                primary\n                                                size={uiElemSize}\n                                            >\n                                                <FormattedMessage id=\"confirmation.confirm\" />\n                                            </Button>\n                                        </div>\n                                    </Container>\n                                </div>\n                            </div>\n                        ) : (\n                            <div className=\"page--whosis\">\n                                <div className=\"page--header\">\n                                    <Container textAlign=\"center\">\n                                        <div>\n                                            <h2>{verification.domainName}</h2>\n                                            <p>\n                                                <FormattedMessage id={headerAltText()} />\n                                            </p>\n                                        </div>\n                                    </Container>\n                                </div>\n                                <div className=\"page--block\">\n                                    <Container text>\n                                        <header className=\"page--block--header\">\n                                            <h2>\n                                                <FormattedMessage id=\"confirmation.valid_registrant\" />\n                                            </h2>\n                                        </header>\n                                        <Table basic=\"very\">\n                                            <Table.Body>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.registrar.name\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.name}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.registrant.ident\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.ident}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                                <Table.Row>\n                                                    <Table.Cell width=\"4\">\n                                                        <FormattedMessage\n                                                            id=\"domain.contact.country\"\n                                                            tagName=\"strong\"\n                                                        />\n                                                    </Table.Cell>\n                                                    <Table.Cell>\n                                                        {verification.currentRegistrant.country}\n                                                    </Table.Cell>\n                                                </Table.Row>\n                                            </Table.Body>\n                                        </Table>\n                                    </Container>\n                                </div>\n                            </div>\n                        )}\n                    </>\n                ) : (\n                    <PageMessage\n                        headerContent={\n                            <FormattedMessage\n                                id={\n                                    match.params.type === 'change'\n                                        ? 'confirmation.change_not_available'\n                                        : 'confirmation.delete_not_available'\n                                }\n                            />\n                        }\n                        icon=\"frown outline\"\n                    />\n                )}\n            </div>\n        </MainLayout>\n    );\n};\n\nexport default connect(\n    (state) => state,\n    (dispatch) =>\n        bindActionCreators(\n            {\n                fetchVerification: fetchVerificationAction,\n                respondToVerification: respondToVerificationAction,\n            },\n            dispatch\n        )\n)(ConfirmationPage);\n\nConfirmationPage.propTypes = {\n    match: PropTypes.object.isRequired,\n    ui: PropTypes.object.isRequired,\n    message: PropTypes.string.isRequired,\n    fetchVerification: PropTypes.func.isRequired,\n    verification: PropTypes.bool.isRequired,\n};\n"],"sourceRoot":""}